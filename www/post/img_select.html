<ons-navigator page="img_select.html" var="myNavigator"></ons-navigator>
<ons-template id="img_select.html">
    <ons-page ng-controller="imgSelectCtrl">
        <ons-toolbar fixed-style>
            <div class="center">
                画像選択
            </div>
        </ons-toolbar>
        <main class="contents image_wrapper">
           <div>
            <p class="info">
                アップロードする画像を選択してください。
            </p>
            <ons-button ng-click="showCamera()">
                <ons-icon icon="fa-camera"></ons-icon> カメラで撮影する</ons-button>
            <ons-button ng-click="showGallery()">
                <ons-icon icon="fa-image"></ons-icon> ギャラリーから選ぶ</ons-button>
           </div>
                       <ons-modal var="modal">
                <ons-icon icon="ion-load-c" spin="true"></ons-icon>
                <br>
                <br>読み込み中
            </ons-modal>
        </main>
        <link rel="stylesheet" href="css/post.css">
    </ons-page>
</ons-template>
<ons-template id="post.html">
    <ons-page ng-controller="postCtrl" ng-init="init()">
        <ons-toolbar fixed-style class="with-back">
            <div class="left">
                <ons-back-button modifier="back">戻る</ons-back-button>
            </div>
            <div class="center">
                投稿フォーム
            </div>
        </ons-toolbar>
        <main>
            <div id="thumbnail">
                <img id="upload_img" class="img-resize" ng-src="{{piece.imageURI}}">
            </div>
            <div class="contents">
                <form name="postForm" novalidate>
                    <dl>
                        <dt class="map_marker any">住所</dt>
                        <dd><span ng-bind="piece.address"></span></dd>
                        <dt class="user">名前</dt>
                        <dd ng-hide="user.isLogin">
                            <input type="text" name="name" ng-model="piece.name" required name-length hide-tabbar>
							<div class="error" ng-messages="postForm.name.$error" ng-messages-multiple ng-if="postForm.name.$touched">
							  <div ng-repeat="error in errors">
								<span ng-message-exp="error.key">{{error.msg}}</span>
							  </div>
							</div>
                        </dd>
                        <dd ng-show="user.isLogin"><span ng-bind="user.name"></span></dd>
                        <dt class="comment">コメント</dt>
                        <dd>
                            <textarea name="comment" cols="30" rows="7" ng-model="piece.comment" hide-tabbar required ng-maxlength="100"></textarea>
                            <div class="error" ng-messages="postForm.comment.$error" ng-messages-multiple ng-if="postForm.comment.$touched">
							  <div ng-repeat="error in errors">
								<span ng-message-exp="error.key">{{error.msg}}</span>
							  </div>
								<span ng-message="maxlength">100文字以下で入力してください</span>
							</div>
                        </dd>
                    </dl>
                    <div class="position_center">
                        <ons-button ng-click="post(piece)" modifier="orange post" ng-disabled="postForm.$invalid == null || postForm.$pristine">登録する</ons-button>
                    </div>
                </form>
            </div>
        </main>
        <link rel="stylesheet" href="css/page_back_color.css">
        <link rel="stylesheet" href="css/form.css">
    </ons-page>
</ons-template>
<ons-template id="post_info.html">
    <ons-page>
        <ons-toolbar fixed-style>
            <div class="center">
                投稿完了
            </div>
        </ons-toolbar>
        <h1 class="top_icon">
            <ons-icon icon="fa-smile-o" size="2em"></ons-icon><br>
            投稿が完了しました
        </h1>
        <div class="contents position_center">
            <ons-button ng-click="toPostPage()" class="btn" modifier="orange" style="margin-bottom: 25px;">
                続けて投稿する</ons-button>
            <ons-button class="btn" ng-click="">
                ギャラリーから選ぶ</ons-button>
        </div>
    </ons-page>
</ons-template>